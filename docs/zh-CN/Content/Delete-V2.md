# 删除-V2

通过在 Sandboxie.ini 中添加 UseFileDeleteV2=y 和 UseRegDeleteV2=y，可以启用 Sandboxie 的新文件系统和注册表虚拟化方案，这会改变主机文件/键在沙盒内被标记为已删除的机制。

旧方案通过创建一个具有指定无效创建日期的虚拟文件/键并将文件/键标记为已删除来工作。当包含"已删除"项的文件夹/键被移动并创建同名的新文件夹时，此方案会失败。此外，对于每个路径访问，它都需要扫描整个父路径以查看是否有父项被标记为已删除。

新方案将此信息保存在沙盒根目录的 FilePaths.dat/KeyPaths.dat 文件中。此外，当文件夹/键在沙盒内重命名时，会创建一个重定向条目，使得在新位置下在沙盒中列出主机内容可以正常工作。 